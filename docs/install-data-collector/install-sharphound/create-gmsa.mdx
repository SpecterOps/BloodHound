---
title: Create a gMSA for Use With SharpHound Enterprise
---

import MySnippet from '/snippets/gmsa-intro-snippet.mdx';

<img noZoom src="/assets/enterprise-edition-pill-tag.svg"/>

This page describes how to configure and run the SharpHound Enterprise collection tool using an Active Directory gMSA. 

<Tip>To learn how to do this with SharpHound Community Edition, see [Create a gMSA for Use With SharpHound Community Edition](/collect-data/ce-collection/create-gmsa-community-edition.mdx).</Tip>

<MySnippet word="Enterprise"/>

The gMSA is now ready to be used on the SharpHound Enterprise server. Follow [Install and Upgrade SharpHound Enterprise](/install-data-collector/install-sharphound/installation-upgrade) to complete the installation of the SharpHound Enterprise service.

## Add the gMSA to the SharpHound Enterprise service

Change the SharpHound Enterprise service to be run by the created gMSA. This can be done in two ways:

### Using Services GUI / 'services.msc'

1.  Open the Services application / 'services.msc' as a local administrator.
2.  Open properties of the service: **SharpHoundDelegator**.
3.  In the **Log On** tab, set **This account** to be the gMSA.
4.  Delete the contents of the password fields if present.
5.  Save by clicking **OK**.

  <Frame>
    <img src="/assets/image-96.png" alt=""/>
  </Frame>

### Using command line / 'sc.exe'

1.  Open the command prompt/PowerShell as a local administrator.

2.  Run the following command, replacing the 'DOMAIN' and gMSA name to match your environment.
  
  ```
      sc.exe config SHDelegator obj= "DOMAIN\\t0_gMSA_SHS$"
  ```
<Frame>
  <img src="/assets/image-97.png" alt=""/>
</Frame>
